function getParametricEquation(e,t,i,s,o,a){const n=(e+t)/2,r=e*Math.PI*2,p=t*Math.PI*2,d=n*Math.PI*2;0===e&&1===t&&(i=!1),o=1;const c=i?.1*Math.cos(d):0,l=i?.1*Math.sin(d):0,h=s?1.05:1;return{u:{min:-Math.PI,max:3*Math.PI,step:Math.PI/32},v:{min:0,max:2*Math.PI,step:Math.PI/20},x:function(e,t){return e<r?c+Math.cos(r)*(1+Math.cos(t)*o)*h:e>p?c+Math.cos(p)*(1+Math.cos(t)*o)*h:c+Math.cos(e)*(1+Math.cos(t)*o)*h},y:function(e,t){return e<r?l+Math.sin(r)*(1+Math.cos(t)*o)*h:e>p?l+Math.sin(p)*(1+Math.cos(t)*o)*h:l+Math.sin(e)*(1+Math.cos(t)*o)*h},z:function(e,t){return e<.5*-Math.PI?Math.sin(e):e>2.5*Math.PI?Math.sin(e)*a*.1:Math.sin(t)>0?1*a*.1:-1}}}function getPie3D(e,t,i,s,o,a=1){const n=[];let r=0,p=0,d=0;const c=[],l=void 0!==t?(1-t)/(1+t):1/3;for(let t=0;t<e.length;t+=1){r+=e[t].value;const i={name:void 0===e[t].name?`series${t}`:e[t].name,type:"surface",parametric:!0,wireframe:{show:!1},pieData:e[t],pieStatus:{selected:!1,hovered:!1,k:l}};if(void 0!==e[t].itemStyle){const s={};void 0!==e[t].itemStyle.color&&(s.color=e[t].itemStyle.color),void 0!==e[t].itemStyle.opacity&&(s.opacity=e[t].itemStyle.opacity),i.itemStyle=s}n.push(i)}for(let e=0;e<n.length;e+=1)d=p+n[e].pieData.value,n[e].pieData.startRatio=p/r,n[e].pieData.endRatio=d/r,console.log(n[e].pieData.startRatio,n[e].pieData.endRatio,!1,!1,l,n[e].pieData.value),n[e].parametricEquation=getParametricEquation2(n[e].pieData.startRatio,n[e].pieData.endRatio,!1,!1,l,n[e].pieData.value),p=d,c.push(n[e].name);return n}let echarts5=echarts.init(document.getElementById("echarts-five"));const optionsData=[{name:"2018",value:11,itemStyle:{color:"#f7601d"}},{name:"2019",value:33,itemStyle:{color:"#6e46e1"}},{name:"2020",value:22,itemStyle:{color:"#fff09f"}},{name:"2021",value:22,itemStyle:{color:"#9fd3ff"}}],series5=getPie3D(optionsData,.8,240,28,26,.5);series5.push({name:"pie2d",type:"pie",label:{opacity:1,fontSize:transformFontSize(12),lineHeight:20,color:"#fff",fontWeight:"bold"},labelLine:{length:30,length2:10},tooltip:{trigger:"axis",axisPointer:{type:"cross",crossStyle:{color:"#999"}}},startAngle:-30,clockwise:!1,radius:["20%","50%"],center:["50%","50%"],data:optionsData,itemStyle:{opacity:0}}),option5={tooltip:{formatter:e=>{if("mouseoutSeries"!==e.seriesName&&"pie2d"!==e.seriesName){let t=(100*(option5.series[e.seriesIndex].pieData.endRatio-option5.series[e.seriesIndex].pieData.startRatio)).toFixed(2);return`${e.seriesName}<br/>`+`<span style="display:inline-block;margin-right:5px;border-radius:10px;width:10px;height:10px;background-color:${e.color};"></span>`+`${t}%`}}},title:{text:"",x:"center",top:"20",textStyle:{color:"#fff",fontSize:22}},labelLine:{show:!0,length:0,lineStyle:{color:"#7BC0CB"}},label:{show:!0,position:"outside",fontSize:12,formatter:"{d}% ({b})"},xAxis3D:{min:-1,max:1},yAxis3D:{min:-1,max:1},zAxis3D:{min:-1,max:1},grid3D:{show:!1,boxHeight:30,viewControl:{alpha:40,beta:40,distance:500,rotateSensitivity:0,zoomSensitivity:0,panSensitivity:0,autoRotate:!1}},series:series5},echarts5.setOption(option5);let selectedIndex="",hoveredIndex="";echarts5.on("click",function(e){let t=!option5.series[e.seriesIndex].pieStatus.selected,i=option5.series[e.seriesIndex].pieStatus.hovered,s=option5.series[e.seriesIndex].pieStatus.k,o=option5.series[e.seriesIndex].pieData.startRatio,a=option5.series[e.seriesIndex].pieData.endRatio;""!==selectedIndex&&selectedIndex!==e.seriesIndex&&(option5.series[selectedIndex].parametricEquation=getParametricEquation(option5.series[selectedIndex].pieData.startRatio,option5.series[selectedIndex].pieData.endRatio,!1,!1,s,option5.series[selectedIndex].pieData.value),option5.series[selectedIndex].pieStatus.selected=!1),option5.series[e.seriesIndex].parametricEquation=getParametricEquation(o,a,t,i,s,option5.series[selectedIndex].pieData.value),option5.series[e.seriesIndex].pieStatus.selected=t,t&&(selectedIndex=e.seriesIndex),echarts5.setOption(option5)}),echarts5.on("mouseover",function(e){let t,i,s,o,a;hoveredIndex!==e.seriesIndex&&(""!==hoveredIndex&&(t=option5.series[hoveredIndex].pieStatus.selected,i=!1,s=option5.series[hoveredIndex].pieData.startRatio,o=option5.series[hoveredIndex].pieData.endRatio,a=option5.series[hoveredIndex].pieStatus.k,option5.series[hoveredIndex].parametricEquation=getParametricEquation(s,o,t,i,a,option5.series[hoveredIndex].pieData.value),option5.series[hoveredIndex].pieStatus.hovered=i,hoveredIndex=""),"mouseoutSeries"!==e.seriesName&&(t=option5.series[e.seriesIndex].pieStatus.selected,i=!0,s=option5.series[e.seriesIndex].pieData.startRatio,o=option5.series[e.seriesIndex].pieData.endRatio,a=option5.series[e.seriesIndex].pieStatus.k,option5.series[e.seriesIndex].parametricEquation=getParametricEquation(s,o,t,i,a,option5.series[e.seriesIndex].pieData.value+5),option5.series[e.seriesIndex].pieStatus.hovered=i,hoveredIndex=e.seriesIndex),echarts5.setOption(option5))}),window.addEventListener("resize",function(){echarts5.resize()});